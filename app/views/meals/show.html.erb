<div class="container" >
     <div class="row">
        <div class="col-xs-12">
          <div
              class="meal-banner-picture" style="background-image:url('<%= @meal.picture.url(:medium) %>')">
               <h1 id="meal-name"><%= @meal.name %></h1>
           <div>
                <h1 id="meal-price"><%= @meal.price %> € </h1>
                <h1 id="meal-quantity"><%= @meal.quantity %> <i class="fa fa-cutlery"></i></h1>
          </div>
      </div>



  <div class="row">
    <div class="col-xs-12 col">
      <div class="grey-card">

        <h2>Information sur la boxe</h2>

          <p> Description du plat: <%= @meal.description %> <p>
          <p> Journée de disponibilité de la boxe <%= @meal.starting_date %> </p>
          <p> Horaire de restrait le midi: <%= @meal.take_away_noon_starts_at %> à
          <%= @meal.take_away_noon_ends_at %> </p>
           <p> Horaire de restrait le soir: <%= @meal.take_away_evening_starts_at %> à
          <%= @meal.take_away_evening_ends_at %> </p>
        </div>
      </div>
  </div>


  <div class="row">
    <div class="col-xs-12">
      <div class="grey-card">

          <h2>Informations sur le restaurant</h2>

        <p> Nom du restaurant: <%= @meal.restaurant.name %> </p>
        <p> Addresse du restaurant: <%= @meal.restaurant.full_address %> </p>
        <p> Numéro de téléphone: <%= @meal.restaurant.phone_number %> </p>
        <p> <%= image_tag @meal.restaurant.picture.url(:small) %> </p>

     </div>
    </div>
  </div>


  <div class="row">
    <div class="col-xs-12 col-sm-6">
      <h4>Quantité de meal(s) souhaitée</h4>
        <select class="select required form-control" name="quantité[quantity]" id="meal_quantity"><option value=""></option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
      </select>
    </div>
  </div class="row">
    <div class="col-xs-12 col-sm-6" style="margin:15px">
      <p><%= link_to "RESERVER", restaurant_meals_path(@restaurant, @meal), class: "btn btn-success"%></p>
    </div>

    <div>
      <h2>Map</h2>
    </div>

    </div>

      <% content_for(:after_js) do %>
        <%= javascript_tag do %>
          $(document).ready(function() {
            var coord = <%= raw @flat_coordinates %>;
            alert('Flat coordinates are ' + coord.lat + ', ' + coord.lng);
          });
        <% end %>
      <% end %>

      </div>

</div>

<div id="map" style="width: 100%; height: 600px;"></div>

<div>
  <% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).on('ready', function() {
      handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    })
  <% end %>
<% end %>

</div>


<% content_for :after_js do %>

 <!-- Include Google Maps JS API -->
 <script type="text/javascript"
   src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;key= AIzaSyAyi0K8taljUqo81J5MakHfzIzHFgrMg2U">
 </script>

 <!-- Custom JS code to bind to Autocomplete API -->
 <!-- find it here: https://github.com/lewagon/google-place-autocomplete/blob/gh-pages/autocomplete.js -->
 <!-- We'll detail this file in the article -->
 <!-- <script type="text/javascript" src="autocomplete.js"></script> -->
 <%= javascript_tag do %>
     google.maps.event.addDomListener(window, 'load', function() {
     initializeAutocomplete('user_input_autocomplete_city');
     });
 <% end %>

<% end %>



